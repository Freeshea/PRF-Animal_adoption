<div *ngIf="requests.length === 0">There aren't any adoption requests.</div>

<div *ngFor="let request of requests" class="request-card">
  <h3>
    <span (click)="goToDetails(request.animal_id._id)" class="clickable">
      {{ request.animal_id.name }}
    </span> ({{ request.animal_id.species }})
  </h3>

  <p><strong>User:</strong> {{ request.user_id.name }}</p>

  <mat-form-field appearance="outline">
    <mat-label>Date for meetup</mat-label>
    <input matInput [matDatepicker]="picker" [(ngModel)]="request.meetingDate" [disabled]="!canEdit(request)">
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field>

  <div *ngIf="isAdmin">
    <mat-form-field appearance="outline">
      <mat-label>Status:</mat-label>
      <mat-select [(ngModel)]="request.status">
        <mat-option value="pending">Pending</mat-option>
        <mat-option value="accepted">Accepted</mat-option>
        <mat-option value="rejected">Rejected</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <p><strong>Message:</strong> {{ request.message || ' ' }}</p>
  <p><strong>Status:</strong> {{ request.status }}</p>

  <div class="request-actions">
    <button mat-raised-button color="primary" (click)="updateRequest(request)">Save</button>
    <button mat-raised-button color="warn" (click)="deleteRequest(request._id)">Delete</button>
  </div>
</div>
